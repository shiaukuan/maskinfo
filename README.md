# MaskInfo - 敏感資訊隱碼工具

Chrome 擴展，自動偵測並隱碼處理文字中的敏感資訊（姓名、電話、地址、Email、數值）。

## 功能特色

- **自動偵測敏感資訊**：姓名、電話、地址、Email、數值
- **部分遮蔽**：保留部分資訊便於識別
- **數值隨機變動**：金額和數字隨機變動 ±10-30%
- **可選擇處理類型**：勾選要處理的類型，未勾選則顯示原始值
- **設定記憶**：記住你的偏好設定
- **Excel 相容**：複製結果可直接貼到 Excel，保留表格格式

## 隱碼範例

| 類型 | 原始資料 | 隱碼後 |
|------|----------|--------|
| 姓名（中文） | 王大明 | 王** |
| 姓名（英文） | John Smith | J*** S*** |
| 電話 | 0912-345-678 | 0912-***-678 |
| Email | user@example.com | u***@e***.com |
| 地址 | 台北市大安區忠孝東路100號 | 台北市大安區***** |
| 數值 | 763 | 852（隨機） |

## 安裝方式

### 方式一：開發者模式載入（推薦）

1. 下載或 clone 此專案
2. 安裝依賴並構建：
   ```bash
   npm install
   npm run build
   ```
3. 開啟 Chrome，前往 `chrome://extensions/`
4. 開啟右上角「開發人員模式」
5. 點擊「載入未封裝項目」
6. 選擇專案中的 `dist` 資料夾

### 方式二：打包成 .crx 檔案

1. 完成上述步驟 1-4
2. 點擊「打包擴充功能」
3. 擴充功能根目錄選擇 `dist` 資料夾
4. 點擊「打包擴充功能」
5. 會產生 `dist.crx` 和 `dist.pem` 檔案
6. 將 `.crx` 檔案拖曳到 `chrome://extensions/` 頁面安裝

## 使用方式

### 方式一：右鍵選單

1. 在網頁上選取要處理的文字
2. 按右鍵，選擇「隱碼處理選取文字」
3. 擴展視窗會顯示處理結果

### 方式二：直接輸入

1. 點擊 Chrome 工具列上的擴展圖示
2. 在輸入框中貼上或輸入要處理的文字
3. 點擊「處理文字」

### 操作說明

- **勾選類型** = 該類型會被隱碼處理
- **取消勾選** = 該類型顯示原始值
- **預設設定**：姓名、電話、地址、Email 已勾選；數值未勾選
- **複製結果**：點擊「複製結果」按鈕，可貼到 Excel 或其他應用程式

## 偵測規則

### 姓名
- **中文姓名**：常見姓氏（陳林黃張李王吳劉...等 50+ 個）開頭的 2-4 個中文字
- **帶稱謂**：王大明先生、陳小姐、李經理 等
- **英文姓名**：連續 2-3 個大寫開頭單字（如 John Smith）

### 電話
- 台灣手機：0912-345-678、0912345678
- 台灣市話：02-1234-5678、(02)12345678
- 國際格式：+886-912-345-678
- 美國格式：(123) 456-7890

### 地址
- 台灣地址：台北市大安區忠孝東路100巷5弄10號
- 簡化地址：中山路100號
- 英文地址：123 Main Street

### Email
- 標準格式：user@example.com

### 數值
- 金額：NT$1,234、$500、1,000元
- 純數字：3 位數以上（如 763、12345）

## 專案結構

```
maskinfo/
├── dist/                      # 構建輸出（載入此目錄到 Chrome）
├── public/
│   └── manifest.json          # Chrome 擴展配置
├── src/
│   ├── background/
│   │   └── index.ts           # Service Worker（右鍵選單）
│   ├── popup/
│   │   ├── index.html         # Popup 入口
│   │   ├── index.tsx          # React 入口
│   │   ├── App.tsx            # 主元件
│   │   └── App.css            # 樣式
│   ├── types/
│   │   └── index.ts           # TypeScript 型別定義
│   └── utils/
│       ├── detector.ts        # 敏感資訊偵測
│       ├── masker.ts          # 隱碼處理
│       ├── randomizer.ts      # 數值隨機變動
│       └── storage.ts         # 設定儲存
├── package.json
├── tsconfig.json
└── vite.config.ts
```

## 開發指令

```bash
# 安裝依賴
npm install

# 開發模式（支援 HMR 熱更新）
npm run dev

# 構建生產版本
npm run build
```

## 技術架構

| 項目 | 技術 |
|------|------|
| 框架 | React 18 |
| 語言 | TypeScript |
| 構建工具 | Vite + @crxjs/vite-plugin |
| 擴展規範 | Chrome Extension Manifest V3 |
| 狀態管理 | React useState + Chrome Storage |

## 設定儲存

擴展會記住你的設定：
- 哪些類型要處理（勾選狀態）
- 設定儲存在 Chrome 本地儲存空間

清除設定方式：
1. 前往 `chrome://extensions/`
2. 找到 MaskInfo 擴展
3. 點擊「詳細資訊」→「清除資料」

## 常見問題

### Q: 複製後貼到 Excel 變成一行？
A: 確保輸入的文字本身有換行。從網頁選取表格時，HTML 的換行可能會變成空格。建議先複製到記事本確認有換行，再貼到擴展處理。

### Q: 某些姓名沒有被偵測到？
A: 目前只支援常見的 50+ 個中文姓氏。如果是罕見姓氏，可能無法偵測。

### Q: 數值沒有被處理？
A: 數值預設不勾選。請在擴展中勾選「數值」類型。另外，只有 3 位數以上的數字才會被偵測。

### Q: 如何更新擴展？
A:
1. 執行 `npm run build` 重新構建
2. 前往 `chrome://extensions/`
3. 點擊 MaskInfo 擴展的重新整理按鈕

## 授權

MIT License
